:ruby
  js_data = {
    csspath: asset_path('codemirror.css'),
    jspath: asset_path('codemirror.js'),
    options: {
      theme: theme = (User.current.try(:code_theme).presence || Cenit.default_code_theme || 'monokai')
    },
    locations: {
      mode: asset_path('codemirror/modes/javascript.js'),
      theme: asset_path("codemirror/themes/#{theme}.css")
    }
  }.to_json.to_s
= form_tag(json_new_path(model_name: @abstract_model.to_param), class: 'form-horizontal denser json-editor-form', enctype: 'multipart/form-data') do
  %textarea{name: 'json_data', 'data-richtext': 'codemirror', 'data-options': js_data}
    = @json_data || JSON.pretty_generate(@object.to_hash)
  = render partial: 'rails_admin/main/submit_buttons'
